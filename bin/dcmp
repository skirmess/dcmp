#!/usr/bin/env perl

use 5.006;
use strict;
use warnings;

our $VERSION = '0.001';

package App::DCMP;

sub _chdir {
    my ( $basedir, $dirs_ref ) = @_;

    chdir $basedir or die "Cannot chdir to $basedir: $!\n";

    for my $i ( 0 .. $#{$dirs_ref} ) {
        if ( !chdir ${$dirs_ref}[$i] ) {

            # We have to store $! before calling cwd(), otherwise the
            # non-failed error of cwd() overwrites the error message
            my $error = qq{$!};

            require Cwd;
            my $msg = sprintf 'Cannot chdir to %s in %s: %s', ${$dirs_ref}[$i], Cwd::cwd(), $error;

            die "$msg\n";
        }
    }

    return;
}

1;

__END__

=head1 NAME

dcmp - Compare directories and produce CVS-like output

=head1 VERSION

=head1 AUTHOR

Sven Kirmess <sven.kirmess@kzone.ch>

=head1 COPYRIGHT AND LICENSE

This software is Copyright (c) 2002-2017 by Sven Kirmess.

This is free software, licensed under:

  The (two-clause) FreeBSD License

=cut

# vim: ts=4 sts=4 sw=4 et: syntax=perl
